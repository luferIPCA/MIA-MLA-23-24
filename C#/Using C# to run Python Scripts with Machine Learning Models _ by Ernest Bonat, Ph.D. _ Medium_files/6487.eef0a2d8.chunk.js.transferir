(self.webpackChunklite=self.webpackChunklite||[]).push([[6487],{24049:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}var l=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm1 0a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-9.07-4.74a.25.25 0 0 0-.25-.26h-1.2a.25.25 0 0 0-.25.26l.13 6.29c0 .13.12.24.25.24h.94c.13 0 .24-.1.25-.24l.13-6.3zM11 16.25c0-.66.44-1.09 1.09-1.09.66 0 1.08.43 1.08 1.09 0 .64-.43 1.06-1.08 1.06-.65 0-1.09-.42-1.09-1.06z",fill:"#C94A4A"});const o=function(e){return i.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),l)}},69920:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}var l=i.createElement("path",{d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zM8.25 12h7.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"});const o=function(e){return i.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),l)}},14045:(e,n,t)=>{"use strict";t.d(n,{M:()=>r});var i=t(67294),a=t(77355),l=t(93310),o=t(50458);function r(e){var n=e.entityName,t=void 0===n?"story":n;return i.createElement(a.x,{textAlign:"center"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",i.createElement(l.r,{target:"_blank",href:o.aH,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",t),".")}},5351:(e,n,t)=>{"use strict";t.d(n,{f:()=>c,w:()=>u});var i=t(34699),a=t(67294),l=t(14646),o=t(68894),r=t(47786),d=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":{xs:"398px",sm:"264px",md:"340px",lg:"340px",xl:"340px"},opacity:e?0:1}},s=(0,a.createContext)({});function c(e){var n=e.children,t=e.post,c=e.hidePost,u=e.unhidePost,m=(0,l.I)(),p=(0,a.useRef)(!1),k=(0,a.useState)(!1),v=(0,i.Z)(k,2),f=v[0],g=v[1],S=(0,o.O)(!1),b=(0,i.Z)(S,3),y=b[0],N=b[1],E=b[2],h=(0,a.useCallback)((function(e){f&&p.current&&("max-height"===e.propertyName?(N(),p.current=!1):null==c||c(t.id))}),[f,t.id,c]),x=(0,a.useCallback)((function(){p.current=!0,g(!0)}),[]),w=(0,a.useCallback)((function(){g(!1),null==u||u(t.id)}),[u,t.id]),C=(0,a.useMemo)((function(){return{animateShowLess:x,animateUndo:w}}),[x,w]);return a.createElement(s.Provider,{value:C},a.createElement("div",{className:m(d(f)),onTransitionEnd:h},n),a.createElement(r.T,{post:t,isVisible:y,hide:E}))}var u=function(){return(0,a.useContext)(s)}},67912:(e,n,t)=>{"use strict";t.d(n,{d:()=>a});var i=t(87329),a={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}].concat((0,i.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]))}},47786:(e,n,t)=>{"use strict";t.d(n,{T:()=>w});var i=t(34699),a=t(67294),l=t(78964),o=t(78038),r=t(25550),d=t(61095),s=t(50474),c=t(77355),u=t(53563),m=t(18627),p=t(66411),k=t(75221),v=t(68894),f=t(87691),g=t(14646),S=t(24049);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},b.apply(this,arguments)}var y=a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.3 9.5v5H2v-5h2.3zm1-.12v5.24l.1.08 7.6 5.78V3.52L5.4 9.3l-.1.08zm7.9-7.27L4.8 8.5H1.5A.5.5 0 0 0 1 9v6c0 .28.22.5.5.5h3.3l8.4 6.39c.33.25.8.02.8-.4V2.51a.5.5 0 0 0-.8-.4zm5.65 7.03a.5.5 0 0 0-.7.71L20.29 12l-2.14 2.15a.5.5 0 1 0 .7.7L21 12.72l2.15 2.15a.5.5 0 1 0 .7-.71L21.71 12l2.14-2.15a.5.5 0 1 0-.7-.7L21 11.28l-2.15-2.15z",fill:"currentColor"});const N=function(e){return a.createElement("svg",b({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),y)};var E=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function h(e){var n=e.onClick,t=e.isReport,i=e.text,l=e.detail,o=(0,g.I)();return a.createElement("button",{className:o(E(t)),onClick:n},t?a.createElement(S.Z,null):a.createElement(N,null),a.createElement(c.x,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},a.createElement(f.F,{scale:"M",color:t?"ERROR":"DARKER",clamp:1},i),l&&a.createElement(f.F,{scale:"S",clamp:1},l)))}var x=t(97048);function w(e){var n,t,o=e.hide,c=e.isVisible,u=e.post,m=null!==(n=null===(t=u.creator)||void 0===t?void 0:t.id)&&void 0!==n?n:"",k=(0,d.Pd)({id:m}).viewerEdge,f=(0,r.r)().viewerId,g=(0,v.O)(!1),S=(0,i.Z)(g,3),b=S[0],y=S[1],N=S[2],E=(0,l.J)({viewerId:f,targetAuthorId:m,targetPostId:u.id,onOptimisticComplete:N}),h=(0,a.useCallback)((function(){y(),o()}),[o]);return a.createElement(a.Fragment,null,c&&a.createElement(p.cW,{source:{dimension:"negative_signal_modal"},extendSource:!0},a.createElement(C,{post:u,report:h,hide:o})),a.createElement(s.U,{isVisible:b,hide:N,type:"story",alreadyBlocking:!(null==k||!k.isBlocking),onSubmit:E}))}function C(e){var n=e.post,t=e.report,l=e.hide,o=(0,a.useState)(!1),r=(0,i.Z)(o,2),d=r[0],s=r[1],m=(0,x.e)(n.id),p=m.undo,v=m.showUndoToast,f=(0,a.useCallback)((function(){d&&(v(k.tG.SHOW_LESS),s(!1)),l()}),[d,l]),g=(0,a.useCallback)((function(){p(),s(!0)}),[p]);return a.createElement(u.u,{hide:f,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can always show more/less from a story’s “••• More” icon.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:g},a.createElement(c.x,{display:"flex",justifyContent:"center",marginBottom:"32px"},a.createElement(c.x,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&a.createElement(F,{publisher:n.creator,hide:l}),n.collection&&!n.collection.viewerEdge.isMuting&&a.createElement(F,{publisher:n.collection,hide:l}),a.createElement(h,{onClick:t,isReport:!0,text:"Report story..."}))))}function F(e){var n=e.publisher,t=e.hide,i=(0,m.A)(),l="User"===n.__typename,r=(0,o.l)(l?n.id:null,l?null:n.id),d=r.muteAuthor,s=r.mutePub,c=(0,a.useCallback)((function(){var e="".concat(n.__typename.toLowerCase(),".muted");i.event(e,{targetUserId:l?n.id:void 0,collectionId:l?void 0:n.id}),l?d():s(),t()}),[d,s,l,n]);return a.createElement(h,{onClick:c,text:"Mute ".concat(l?"author":"publication"),detail:n.name})}},97048:(e,n,t)=>{"use strict";t.d(n,{e:()=>N});var i=t(96156),a=t(34699),l=t(21919),o=t(64718),r=t(67294),d=t(25550),s=t(18627),c=t(66411),u=t(75221),m=t(78285),p=t(11462),k=t(5351),v=t(87329),f=t(67912),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}}].concat((0,v.Z)(f.d.definitions))},S={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function N(e,n){var t,i,v=(0,s.A)(),f=(0,c.Lk)()||{},b=(0,d.r)().viewerId,N=(0,m.w)(),E=(0,k.w)().animateUndo,h=(0,l.D)(S),x=(0,a.Z)(h,1)[0],w=(0,o.a)(g,{variables:{id:e},fetchPolicy:n}),C=w.data,F=w.loading,O=null==C||null===(t=C.post)||void 0===t||null===(i=t.viewerEdge)||void 0===i?void 0:i.explicitSignalState,P=(0,r.useCallback)((function(n){x({variables:{postId:e,signal:n},update:function(t){b&&t.modify({id:"PostViewerEdge:".concat((0,p.Q)(e,b)),fields:{explicitSignalState:function(){return n===u.tG.CLEAR_SIGNAL?null:n}}})}})}),[x,e,b]),I=(0,r.useCallback)((function(n){var t=n.name,i=n.data,a=n.dimension;return v.event(t,y({postId:e,source:a?(0,c.f0)(y(y({},f),{},{dimension:a})):(0,c.f0)(f)},i))}),[e,f]),D=(0,r.useCallback)((function(e){var n=O===u.tG.SHOW_LESS;P(u.tG.CLEAR_SIGNAL),I({name:"post.see_".concat(n?"less":"more",".undo"),dimension:e}),n?null==E||E():A(u.tG.SHOW_MORE)}),[e,O,E]),T=(0,r.useCallback)((function(){P(u.tG.SHOW_MORE),I({name:"post.see_more"})}),[I,P]),R=(0,r.useCallback)((function(){P(u.tG.SHOW_LESS),I({name:"post.see_less",data:{mutationSent:!0}})}),[I,P]),A=(0,r.useCallback)((function(e){N({message:"Undone. We won’t recommend ".concat(e===u.tG.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]),V=(0,r.useCallback)((function(){N({toastStyle:"USER_POSITIVE_SIGNAL",extraParams:{onClickUndo:function(){return D("toast")}}})}),[N,D]);return{loading:F,undo:D,showMore:T,showLess:R,explicitSignal:O,showUndoToast:A,showMoreToast:V}}},66487:(e,n,t)=>{"use strict";t.d(n,{t:()=>wn});var i=t(67294),a=t(22122),l=t(34699),o=t(96156),r=t(48403),d=t.n(r),s=t(64718),c=t(14045),u=t(81253),m=t(38356),p=t(42130),k=["isResponsive"],v=function(e){var n=e.isResponsive,t=(0,u.Z)(e,k);return i.createElement(m.u,(0,a.Z)({text:n?"More":void 0,icon:i.createElement(p.Z,null)},t))},f=t(86706),g=t(13195),S=t(6443),b=t(39507),y=t(38352),N=t(93310),E=t(83486),h=t(43487),x=t(51681),w=function(e){var n=e.post,t=e.hidePopover,a=(0,S.H)().value,l=null==a?void 0:a.id,o=(0,b.T)(n).viewerEdge,r=(0,f.I0)(),d=i.useCallback((function(e){return r((0,E.at)(e))}),[r]),s=(0,h.b$)((function(e){return e.multiVote.clapsPerPost})),c=(0,x.l)(s,n,o),u=c.clapCount,m=c.viewerClapCount,p=(0,g.C)();return l&&u&&m&&m>0?i.createElement(i.Fragment,null,i.createElement(y.Sl,null,i.createElement(N.r,{onClick:function(){p(n,(null==a?void 0:a.id)||"",-m,o),d({postId:n.id,clapCount:u-m,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),t()}},"Undo claps")),i.createElement(y.oK,null)):null},C=t(23768),F=t(32947),O=t(70028),P=t(66021),I=t(90833),D=t(70679),T=t(77355),R=t(87691),A=t(14646),V=t(50458),_={cursor:"not-allowed",marginBottom:"8px",opacity:.5},M=function(e){var n=e.post,t=e.shareKey,a=(0,A.I)();return n&&t?i.createElement(y.Sl,null,i.createElement(T.x,{width:"174px"},i.createElement("div",{className:a(_)},"Copy Friend Link"),i.createElement(R.F,{scale:"S",color:"LIGHTER"},'Friend links have moved to the "Share" menu.  ',i.createElement(N.r,{linkStyle:"OBVIOUS",inline:!0,href:(0,V.wA)()},"Learn more")))):null},j=t(32493),L=t(78285),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},Z=(0,f.$j)()((function(e){var n=e.children,t=e.dispatch,a=e.onCompleted,l=e.targetPostId;return i.createElement(j.m,{mutation:B,onCompleted:function(){t((0,L.Dx)({message:"Responses are now hidden for this post."})),a&&a()},variables:{targetPostId:l,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:l,allowResponses:!1}}},(function(e){return n({mutate:e})}))})),U=(0,f.$j)()((function(e){var n=e.children,t=e.dispatch,a=e.onCompleted,l=e.targetPostId;return i.createElement(j.m,{mutation:B,onCompleted:function(){t((0,L.Dx)({message:"Responses are now shown for this post."})),a&&a()},variables:{targetPostId:l,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:l,allowResponses:!0}}},(function(e){return n({mutate:e})}))})),G=t(75675),H=t(68894),z=function(e){var n=e.hidePopover,t=e.postId,a=e.allowResponses,o=(0,H.O)(!1),r=(0,l.Z)(o,3),d=r[0],s=r[1],c=r[2],u=function(){c(),n()};return i.createElement(i.Fragment,null,i.createElement(Z,{targetPostId:t},(function(e){var n=e.mutate;return i.createElement(G.w,{onConfirm:n,isVisible:d,hide:u,entityTypename:"Post"})})),i.createElement(U,{targetPostId:t},(function(e){var n=e.mutate;return i.createElement(y.Sl,null,i.createElement(N.r,{onClick:function(){a?s():n()}},a?"Hide responses":"Show responses"))})))},K=t(75412),W=t(71652),Q=t(87329),Y=t(84683),J={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat((0,Q.Z)(Y.d.definitions))},q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat((0,Q.Z)(J.definitions))},X=t(21919),$=t(75221),ee=[{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}],ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,Q.Z)(ee))},te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,Q.Z)(ee))},ie=function(e){var n=(0,X.D)(ne),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.APPROVED}})}),[e])},ae=function(e){var n=(0,X.D)(te),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},le=t(25267),oe=t(91583),re=t(47230),de=t(66227),se=t(73917),ce=t(70310),ue=t(20113),me=t(90586),pe=t(34135),ke="collectionSubmissionPopover",ve=[{name:"",value:"No publication",content:i.createElement(T.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},i.createElement(R.F,{scale:"M",color:"DARKER"},"No publication"))}];function fe(e){var n=e.collection;return n.name?i.createElement(T.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},i.createElement(R.F,{scale:"M",color:"DARKER"},n.name),i.createElement(W.v,{collection:n,size:32})):null}function ge(e){var n=e.show,t=e.post,a=t.statusForCollection,o=t.isPublished,r=i.useState(!1),d=(0,l.Z)(r,2),s=d[0],c=d[1];return s||pe.V6.on("load",(function(){return c(!0)})),!a&&o&&s?i.createElement(be,{post:t,noQueryReturn:null},(function(e){var a=e.loading,l=e.error,o=e.data;if(a||l)return null;var r=(void 0===o?{viewer:void 0}:o).viewer,d=t.creator;if(!r||!d||r.id!==d.id)return null;var s=r.adminCollections,c=r.writerCollections;return 0===s.length&&0===c.length?null:i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":ke,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function Se(e){var n=e.isVisible,t=e.hide;return i.createElement(oe.V,{isVisible:n,hide:t,withCloseButton:!0},i.createElement(T.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},i.createElement(ue.X6,{scale:"M",tag:"h3"},"Story submitted"),i.createElement(T.x,{paddingTop:"8px",paddingBottom:"24px"},i.createElement(me.QE,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),i.createElement(re.zx,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var be=function(e){var n=e.children,t=e.post,a=e.noQueryReturn,l=t.creator;return l?i.createElement(le.I,null,(function(e){return e?e.id!==l.id?a:i.createElement(K.A,{query:q,ssr:!1},(function(e){var t=e.loading,i=e.error,a=e.data;return n({loading:t,error:i,data:a})})):a})):a},ye=function(e){var n=e.post,t=e.hide,a=e.showLoadingIndicator,o=e.isVisible,r=e.children,d=i.useState(!1),s=(0,l.Z)(d,2),c=s[0],u=s[1],m=i.useState(""),p=(0,l.Z)(m,2),k=p[0],v=p[1],f=ie(n),g=function(e){var n=(0,X.D)(ne),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:$.Zj.PENDING,pendingCollection:n}}})}),[e])}(n);return c||pe.V6.on("load",(function(){return u(!0)})),n.isPublished&&c?i.createElement(de.B,null,(function(e){var l=e.isVisible,d=e.hide,s=e.show;return i.createElement(i.Fragment,null,i.createElement(Se,{hide:d,isVisible:l}),i.createElement(be,{post:n,noQueryReturn:r},(function(e){var l=e.loading,d=e.error,c=e.data;if(l||d)return r;var u=(void 0===c?{viewer:void 0}:c).viewer,m=n.creator;if(!u||!m||u.id!==m.id)return r;var p=u.adminCollections,S=u.writerCollections;if(0===p.length&&0===S.length)return r;var b=p.concat(S).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:i.createElement(fe,{collection:e})}})),y=ve.concat(b),E=p.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),h=S.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),x="";if(k){var w=y.find((function(e){return e.name===k}));w&&(x=w.value)}var C="addStoryToPublicationTitle";return i.createElement(se.J,{ariaId:ke,hide:t,isVisible:o,popoverRenderFn:function(){return i.createElement(T.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},i.createElement(R.F,{scale:"M",color:"DARKER",ariaLabelledById:C},"Add your story to a publication:"),i.createElement(T.x,{marginTop:"10px",position:"relative"},i.createElement(T.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),i.createElement(T.x,{maxHeight:"160px",overflow:"auto"},i.createElement(ce.E,{value:x,onChange:v,options:y,radioButtonsName:"addStory",ariaLabelledBy:C}))),i.createElement(T.x,{display:"flex",marginTop:"20px"},k in E?i.createElement(re.zx,{onClick:function(){var e=E[k];t(),a(),f(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):i.createElement(re.zx,{onClick:function(){var e=h[k];g(e),t(),s()},disabled:!k},"Submit"),i.createElement(T.x,{marginLeft:"10px"},i.createElement(R.F,{scale:"M",color:"LIGHTER"},i.createElement(N.r,{onClick:t},i.createElement(T.x,{padding:"10px"},"Cancel"))))),i.createElement(T.x,{marginTop:"10px"},i.createElement(R.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},r)})))})):r},Ne=function(e){var n=e.children,t=e.isVisible,a=e.post,l=e.hide,o=e.showLoadingIndicator,r=ie(a),d=ae(a),s=(0,f.I0)(),c=a.pendingCollection;return c?i.createElement(se.J,{ariaId:"manageSubmissionPopover",isVisible:t,hide:l,popoverRenderFn:function(){return i.createElement(T.x,{padding:"16px",maxWidth:"280px"},i.createElement(T.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(T.x,{paddingRight:"8px"},i.createElement(W.v,{collection:c,size:40})),i.createElement(R.F,{scale:"S"},"This draft is submitted to ",c.name,".")),i.createElement(T.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(T.x,{paddingRight:"8px"},i.createElement(re.zx,{buttonStyle:"OBVIOUS",onClick:function(){l(),o(),r(a.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),i.createElement(re.zx,{buttonStyle:"SUBTLE",onClick:function(){d(a.pendingCollection).then((function(){s((0,L.Dx)({message:"Story removed from ".concat(c.name||"publication")}))})),l()}},"Don't accept")))}},n):n},Ee=function(e,n){return n&&e.creator&&n.id===e.creator.id},he=t(39727),xe="removeFromPublicationPopover",we=function(e){var n=e.viewer,t=e.show,a=e.post,l=(0,he.g)(a.pendingCollection||a.collection).viewerEdge,o=null==l?void 0:l.isEditor;return n&&("APPROVED"===a.statusForCollection&&(o||function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id}(a,n)||Ee(a,n))||"PENDING"===a.statusForCollection&&Ee(a,n))?i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":xe,"aria-expanded":"false",onClick:t},"Remove story from publication")):null},Ce=function(e){var n=e.children,t=e.isVisible,a=e.hide,l=e.post,o=e.viewer,r=(0,f.I0)(),d=ae(l),s=l.collection||l.pendingCollection;return s?i.createElement(se.J,{ariaId:xe,isVisible:t,hide:a,popoverRenderFn:function(){return i.createElement(T.x,{padding:"16px",maxWidth:"280px"},i.createElement(T.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(T.x,{paddingRight:"8px"},i.createElement(W.v,{collection:s,size:40})),"APPROVED"===l.statusForCollection?i.createElement(R.F,{scale:"S"},Ee(l,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===l.statusForCollection?i.createElement(R.F,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):i.createElement(R.F,{scale:"S"},"This draft is submitted to ",s.name)),i.createElement(T.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(T.x,{paddingRight:"8px"},i.createElement(re.zx,{buttonStyle:"SUBTLE",onClick:function(){d(s).then((function(){r((0,L.Dx)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){r((0,L.Dx)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),a()}},"PENDING"===l.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):n},Fe=t(43220),Oe=t(31048),Pe=t(74302),Ie=t(44573),De=t(26350),Te=t(96462),Re=t(45509),Ae=t(37774),Ve=t(1383),_e=t(92661),Me=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){for(var e=0,t=n;e<t.length;e++)(0,t[e])()}},je=t(92001),Le=t(93647),Be=t(36736),Ze=t(91727),Ue=t(38487),Ge=t(57477),He={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}}]}}].concat((0,Q.Z)(je.m.definitions),(0,Q.Z)(Le.C.definitions),(0,Q.Z)(je.G.definitions),(0,Q.Z)(Be.x.definitions),(0,Q.Z)(Ze.S.definitions),(0,Q.Z)(Ue.g.definitions),(0,Q.Z)(Ge._C.definitions))},ze={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}}].concat((0,Q.Z)(He.definitions))};function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ke(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Qe=function(e){var n=(0,s.a)(ze,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=We(We({},e),{},{post:n.post});return i.createElement(Ye,t)},Ye=function(e){var n,t,o=e.post,r=e.showLoadingIndicator,s=e.hideUndoApplause,u=void 0!==s&&s,m=e.isResponsive,p=e.popoverPositioningStrategy,k=e.hideAddToList,f=void 0===k||k,g=e.hideOnScroll,E=e.testId,x=e.prependMenuItems,R=e.rules,A=o.creator,_=o.collection,j=i.useState(!1),B=(0,l.Z)(j,2),Z=B[0],U=B[1],G=i.useState(!1),K=(0,l.Z)(G,2),W=K[0],Q=K[1],Y=i.useState(!1),J=(0,l.Z)(Y,2),q=J[0],X=J[1],ee=o.allowResponses,ne=o.pendingCollection,te=o.mediumUrl,ie=o.visibility,ae=(0,he.g)(_).viewerEdge,le=(0,he.g)(ne).viewerEdge,oe=(0,b.T)(o).viewerEdge,re=(0,L.w)(),de=(0,S.H)().value,ce=null==de?void 0:de.id,ue=o.responseDistribution===$.Et.DISTRIBUTED,me=!!o.inResponseToPostResult||!!o.inResponseToCatalogResult,pe=me?"response":"story",ke=(0,Oe.K)(o),ve=(0,l.Z)(ke,2),fe=ve[0],Se=ve[1],be=(0,Fe.U)(o.collection),Ee=(0,Fe.U)(o.creator),xe=i.useCallback((function(e){var n,t,i;re({extraParams:{collectionName:(null===(n=o.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(t=e.data)||void 0===t||null===(i=t.setPinnedAt)||void 0===i||!i.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=o.collection)||void 0===n?void 0:n.name]),je=i.useCallback((function(e,n){var t;"MutationSuccess"===(null===(t=e.data)||void 0===t?void 0:t.setPostPinnedOnCreatorProfile.__typename)&&re({message:"This ".concat(pe,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),Le=i.useCallback((function(){Se().then(xe)}),[Se,xe,null==o||null===(t=o.collection)||void 0===t?void 0:t.name]),Be=(0,Oe.I)(o),Ze=(0,l.Z)(Be,2),Ue=Ze[0],Ge=Ze[1],He=i.useCallback((function(){Ge().then((function(e){return je(e,Ue)}))}),[Ge,je]),ze=(0,h.v9)((function(e){return e.config.authDomain})),Ke=i.useState(!1),We=(0,l.Z)(Ke,2),Qe=We[0],Ye=We[1],Je=(0,H.O)(!1),qe=(0,l.Z)(Je,3),Xe=qe[0],$e=qe[1],en=qe[2],nn=(0,H.O)(!1),tn=(0,l.Z)(nn,4),an=tn[0],ln=tn[2],on=tn[3],rn=(0,O.j)(o.id),dn=(0,l.Z)(rn,1)[0],sn=(0,H.O)(!1),cn=(0,l.Z)(sn,3),un=cn[0],mn=cn[1],pn=cn[2],kn=(0,_e.qt)("ShowHome",{}),vn=i.useCallback((function(){dn().then((function(){window.location.assign(kn)}))}),[dn,kn]),fn="Delete story";ue?fn="Delete story and response":me&&(fn="Delete response");var gn=ue?Pe.Q:i.createElement(c.M,{entityName:pe}),Sn=(0,Ie.P5)("can_edit_members_only_posts");if(!A||!de)return null;var bn=ce===A.id,yn=(null==ae?void 0:ae.isEditor)||(null==le?void 0:le.isEditor),Nn=bn||yn,En=Sn&&o&&o.isLocked,hn=Nn||En,xn="creatorActionOverflowMenu",wn="LOCKED"===ie,Cn=yn&&!bn||!Nn,Fn=!me||ue,On=function(){ue&&(ln(),$e())};if(Qe)return i.createElement(I.l,{to:(0,V.d0)(ze,o.id)});var Pn={kind:$.ej.POST,target:o};return i.createElement(i.Fragment,null,i.createElement(Ve.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Xe,onConfirm:function(){Ye(!0)},hide:en,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},Pe.t),i.createElement(Ve.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:un,onConfirm:vn,hide:pn,titleText:fn,confirmText:"Delete",isDestructiveAction:!0},gn),i.createElement(C.a,(0,a.Z)({},Pn,{viewer:de}),(function(e){var n=e.onClick;return i.createElement(se.J,{targetDistance:10,ariaId:xn,isVisible:an,hide:ln,positioningStrategy:p,hideOnScroll:g,popoverRenderFn:function(){return i.createElement(y.mX,null,x&&i.createElement(i.Fragment,null,x(ln)),i.createElement(i.Fragment,null,i.createElement(F.l,{type:"popover",handleClick:On,href:(0,V.d0)(ze,o.id),isVisible:!!hn},"Edit ",pe),_&&yn&&be&&Fn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:Le},fe?"Unpin this ".concat(pe," from "):"Pin this ".concat(pe," to "),_.name)),bn&&Ee&&Fn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:He},Ue?"Unpin this ".concat(pe," from your profile"):"Pin this ".concat(pe," to your profile"))),i.createElement(D.w,{post:o,onClick:ln,menuStyle:"TEXT"}),Nn?i.createElement(i.Fragment,null,i.createElement(y.oK,null),i.createElement(y.Sl,null,i.createElement(N.r,{href:(0,V.KI)(ze,o.id)},d()(pe)," settings"))):null,Nn&&i.createElement(y.Sl,null,i.createElement(N.r,{href:(0,V.T0)(ze,o.id)},d()(pe)," stats")),Nn&&wn&&te&&(null==oe?void 0:oe.shareKey)&&i.createElement(M,{post:o,shareKey:null==oe?void 0:oe.shareKey}),Nn&&i.createElement(y.oK,null),Nn?i.createElement(i.Fragment,null,i.createElement(z,{hidePopover:ln,postId:o.id,allowResponses:ee}),!f&&i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":xn,"aria-expanded":"false",onClick:function(e){ln(),n(e)}},"Add to list")),i.createElement(ge,{post:o,show:function(){Q(!0),ln()}}),i.createElement(we,{viewer:de,post:o,show:function(){X(!0),ln()}}),bn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:Me(ln,mn),color:"RED"},"Delete ",pe))):null,Cn?i.createElement(i.Fragment,null,yn&&i.createElement(y.oK,null),!u&&i.createElement(w,{post:o,hidePopover:ln}),i.createElement(i.Fragment,null,ce?i.createElement(Ae.z,{targetUserId:A.id,postId:o.id,hidePopover:ln,viewerId:ce}):i.createElement(y.Sl,null,i.createElement(De.R,{operation:"register",post:o,susiEntry:"report_footer"},"Report this ",pe))),i.createElement(P.q,{hidePopover:ln,creator:A,collection:_,postId:o.id}),i.createElement(Te.F,{hidePopover:ln,creator:A,viewer:de}),i.createElement(Re.j,{hidePopover:ln,creator:A,viewer:de})):null))}},i.createElement(ye,{post:o,isVisible:W,hide:function(){Q(!1)},showLoadingIndicator:r},i.createElement(Ce,{viewer:de,post:o,isVisible:q,hide:function(){X(!1)}},i.createElement(Ne,{post:o,isVisible:Z,hide:function(){U(!1)},showLoadingIndicator:r},i.createElement(T.x,{flexGrow:"0",marginRight:"-4px"},i.createElement(v,{ariaControls:xn,ariaExpanded:an?"true":"false",ariaLabel:"More options",onClick:function(){Z?U(!1):W?Q(!1):on()},isResponsive:m,tooltipText:"More",testId:E,rules:R}))))))})))},Je=t(25735);function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qe.apply(this,arguments)}var Xe=i.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),$e=i.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const en=function(e){return i.createElement("svg",qe({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),Xe,$e)};var nn=t(69920);function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},tn.apply(this,arguments)}var an=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1h-7.5z",fill:"currentColor"});const ln=function(e){return i.createElement("svg",tn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),an)};function on(){return on=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},on.apply(this,arguments)}var rn=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM12 7.75c.28 0 .5.22.5.5v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1 0-1h3.25V8.25c0-.28.22-.5.5-.5z",fill:"currentColor"});const dn=function(e){return i.createElement("svg",on({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),rn)};function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sn.apply(this,arguments)}var cn=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zm10-9a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM7.75 12c0-.28.22-.5.5-.5h3.25V8.25a.5.5 0 0 1 1 0v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1-.5-.5z",fill:"currentColor"});const un=function(e){return i.createElement("svg",sn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),cn)};var mn=t(5351),pn=t(47786),kn=t(97048);function vn(e){var n=e.hidePopover,t=e.post,a=(0,H.O)(!1),o=(0,l.Z)(a,3),r=o[0],d=o[1],s=o[2],c=(0,kn.e)(t.id),u=c.showMore,m=c.showLess,p=c.explicitSignal,k=c.undo,v=c.showUndoToast,f=c.showMoreToast,g=(0,mn.w)(),S=g.animateShowLess,b=g.animateUndo,N=p===$.tG.SHOW_MORE,E=p===$.tG.SHOW_LESS,h=(0,i.useCallback)((function(){N?k():(u(),f()),n()}),[u,n,N,k,f]),x=(0,i.useCallback)((function(){E?(k(),v($.tG.SHOW_LESS),n(),null==b||b()):(m(),S?(n(),S()):d())}),[m,n,E,k,v,S,b]),w=(0,i.useCallback)((function(){n(),s()}),[n,s]);return i.createElement(i.Fragment,null,i.createElement(fn,{value:$.tG.SHOW_MORE,onClick:h,isSelected:N}),i.createElement(fn,{value:$.tG.SHOW_LESS,onClick:x,isSelected:E}),i.createElement(y.oK,null),i.createElement(pn.T,{isVisible:r,hide:w,post:t}))}var fn=function(e){var n=e.value,t=e.onClick,a=e.isSelected;return i.createElement(y.Sl,null,i.createElement(N.r,{onClick:t},i.createElement(T.x,{display:"flex"},i.createElement(T.x,{marginRight:"12px",flexShrink:"0"},i.createElement(gn,{value:n,isSelected:a})),i.createElement(T.x,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},"Show ",n===$.tG.SHOW_MORE?"more":"less",i.createElement(R.F,{scale:"S"},"Recommend ",n===$.tG.SHOW_MORE?"more":"fewer"," stories like this to me.")))))};function gn(e){var n=e.isSelected;return e.value===$.tG.SHOW_MORE?n?i.createElement(dn,null):i.createElement(un,null):n?i.createElement(ln,null):i.createElement(nn.Z,null)}var Sn=t(17778),bn=t(61095),yn=t(18627),Nn=t(66411);function En(e){var n=e.author,t=e.collection,a=e.hidePopover,l=(0,yn.A)(),o=(0,bn.Pd)(n).viewerEdge,r=(0,he.g)(t).viewerEdge,d=(null==n?void 0:n.id)||"",s=(null==t?void 0:t.id)||"",c=null==o?void 0:o.isFollowing,u=null==r?void 0:r.isFollowing,m=(0,Sn.l)(d,s),p=m.followUser,k=m.unfollowUser,v=m.followCollection,f=m.unfollowCollection,g=(0,Nn.pK)(),b=(0,S.H)().value,E=b&&d===b.id,h=(0,i.useCallback)((function(){l.event("user.".concat(c?"unfollowed":"followed"),{followSource:g,targetUserId:d}),c?k():p(),null==a||a()}),[d,c,p,k,a,g]),x=(0,i.useCallback)((function(){l.event("collection.".concat(u?"unfollowed":"followed"),{followSource:g,collectionId:s}),u?f():v(),null==a||a()}),[s,u,v,a,g,f]);return b?i.createElement(i.Fragment,null,!!n&&!E&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:h},c?"Unfollow":"Follow"," author")),!!t&&!(null!=r&&r.isEditor)&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:x},u?"Unfollow":"Follow"," publication"))):null}var hn=t(42732),xn=function(e){var n=e.post,t=e.setDismissedPostId,o=e.isResponsive,r=e.hideNegativeSignalItem,d=e.popoverPositioningStrategy,s=e.hideAddToList,c=void 0===s||s,u=e.viewer,m=e.hideOnScroll,p=e.testId,k=e.prependMenuItems,f=e.rules,g=n.id,S=n.creator,b=n.collection,E=(0,H.O)(!1),h=(0,l.Z)(E,4),x=h[0],F=h[2],O=h[3],I=(0,Je.V)({name:"enable_explicit_signals",placeholder:!1}),D=(0,hn.c)({post:n,onShowLess:F,setDismissedPostId:t}).handleShowLess,R={kind:$.ej.POST,target:n},A=(0,i.useCallback)((function(e){return i.createElement(y.mX,{width:I&&!r?"248px":void 0},k&&i.createElement(i.Fragment,null,k(F)),!r&&(I?i.createElement(vn,{hidePopover:F,post:n}):i.createElement(T.x,{borderBottom:"neutral.primary",paddingBottom:"4px",marginBottom:"4px"},i.createElement(y.Sl,null,i.createElement(N.r,{onClick:D,"aria-label":"Show less like this"},i.createElement(T.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},i.createElement(T.x,{marginRight:"4px"},i.createElement(en,null)),i.createElement(T.x,null,"Show less like this")))))),!c&&i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":"aria-id","aria-expanded":"false",onClick:function(){F(),e()}},"Add to list")),i.createElement(w,{post:n,hidePopover:F}),i.createElement(En,{author:S,collection:b,hidePopover:F}),i.createElement(y.oK,null),i.createElement(P.q,{creator:S,collection:b,hidePopover:F,postId:g}),i.createElement(Ae.z,{postId:g,viewerId:null==u?void 0:u.id,targetUserId:(null==S?void 0:S.id)||"",hidePopover:F}))}),[I,k]);return null!=S&&S.id?i.createElement(C.a,(0,a.Z)({},R,{viewer:u}),(function(e){var n=e.onClick;return i.createElement(se.J,{isVisible:x,positioningStrategy:d,targetDistance:10,hide:F,popoverRenderFn:function(){return A(n)},hideOnScroll:m},i.createElement(v,{onClick:O,ariaLabel:"More options",isResponsive:o,tooltipText:"More",testId:p,rules:f}))})):null},wn=function(e){var n=e.post,t=e.setDismissedPostId,a=e.isResponsive,l=e.hideNegativeSignalItem,o=e.popoverPositioningStrategy,r=e.hideAddToList,d=void 0===r||r,s=e.hideOnScroll,c=e.testId,u=e.prependMenuItems,m=e.rules,p=n.creator,k=n.collection,v=n.visibility,f=(0,S.H)(),g=f.loading,b=f.value,y=(0,he.g)(k).viewerEdge,N=!g&&!!b,E=!(null==y||!y.isEditor),h=(null==b?void 0:b.id)===(null==p?void 0:p.id),x=d||v===$.Wn.UNLISTED;return p&&N?E||h?i.createElement(de.B,null,(function(e){var t=e.show;return i.createElement(Qe,{post:n,showLoadingIndicator:t,isResponsive:a,popoverPositioningStrategy:o,hideAddToList:x,hideOnScroll:s,testId:c,prependMenuItems:u,rules:m})})):i.createElement(xn,{post:n,setDismissedPostId:t,isResponsive:a,hideNegativeSignalItem:l,popoverPositioningStrategy:o,hideAddToList:x,viewer:b,hideOnScroll:s,testId:c,prependMenuItems:u,rules:m}):null}},38487:(e,n,t)=>{"use strict";t.d(n,{g:()=>l});var i=t(87329),a=t(46732),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat((0,i.Z)(a.JP.definitions))}},42732:(e,n,t)=>{"use strict";t.d(n,{c:()=>k});var i=t(87329),a=t(82492),l=t.n(a),o=t(26075),r=t(90386),d=t(67294),s=t(59250),c=t(25550),u=t(18627),m=t(66411),p=t(78285),k=function(e){var n=e.post,t=e.onShowLess,a=e.setDismissedPostId,k=n.id,v=n.collection,f=(0,c.r)().viewerId,g=(0,s.jM)(),S=g.setSeeLessPostIds,b=g.isMutingFromHomeFeed,y=(0,p.w)(),N=(0,o.x)().cache,E=(0,u.A)(),h=(0,m.pK)(),x=(0,d.useRef)(null),w=(0,d.useCallback)((function(){x.current=window.setTimeout((function(){E.event("post.see_less",{userId:f,collection:null==v?void 0:v.id,postId:k,source:h})}),3e3)}),[]),C=(0,d.useCallback)((function(){null!==x.current&&window.clearTimeout(x.current)}),[]),F=(0,d.useCallback)((function(){N.modify({id:N.identify((0,r.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,n){var t=n.readField;return l()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&t("id",e.post)!==k}))})}}})}),[k]);return{handleShowLess:(0,d.useCallback)((function(){w(),F(),b&&(S((function(e){return[].concat((0,i.Z)(e),[k])})),null==a||a(k)),y({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:C}}),null==t||t()}),[])}}},75514:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},78964:(e,n,t)=>{"use strict";t.d(n,{J:()=>s});var i=t(34699),a=t(21919),l=t(67294),o=t(18627),r=t(78285),d=t(75514);function s(e){var n=e.viewerId,t=e.targetAuthorId,s=e.targetPostId,c=e.onOptimisticComplete,u=(0,r.w)(),m=(0,o.A)(),p=(0,a.D)(d.H),k=(0,i.Z)(p,1)[0];return(0,l.useCallback)((function(e,i){k({variables:{targetAuthorId:t,targetPostId:s,alsoBlockAuthor:e,reason:i},onCompleted:function(){u({message:"Successfully reported post."}),m.event("post.flagged",{postId:s,reason:i})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isBlocking:e}}}}),null==c||c()}),[k,n,t,s,c])}},91727:(e,n,t)=>{"use strict";t.d(n,{S:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]}},70679:(e,n,t)=>{"use strict";t.d(n,{w:()=>x});var i=t(96156),a=t(34699),l=t(21919),o=t(67294),r=t(25267),d=t(38352),s=t(93310),c=t(77355),u=t(1383),m=t(87691),p=t(14646),k=t(78285);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(this,arguments)}var f=o.createElement("path",{d:"M0 .35v15.3h20V.35H0zm6.95 9.38l3.05 2.5 3.05-2.5 4.88 4.73H2.07l4.88-4.73zM1.2 13.64V5.02l4.82 3.94-4.82 4.68zm12.78-4.68l4.82-3.94v8.62l-4.82-4.68zm4.82-7.42v1.94l-8.8 7.2-8.8-7.2V1.54h17.6z"});const g=function(e){return o.createElement("svg",v({width:20,height:16,viewBox:"0 0 20 16"},e),f)};var S=t(68894),b=t(91727);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e){return{fill:e.colorTokens.foreground.neutral.secondary.base}}var h={height:"16px",width:"16px",marginLeft:"4px"};function x(e){var n=e.post,t=e.onClick,i=e.menuStyle,v=(0,p.I)(),f=(0,S.O)(!1),y=(0,a.Z)(f,3),x=y[0],w=y[1],C=y[2],F=(0,k.w)(),O=function(){C(),t()},P=(0,l.D)(b.P,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;F(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:b.S,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(i);t.data&&a&&e.writeFragment(N(N({},i),{},{data:N(N({},a),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),I=(0,a.Z)(P,1)[0];return o.createElement(r.I,null,(function(e){var a,l,r;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(l=n.creator)||void 0===l||null===(r=l.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?o.createElement(o.Fragment,null,o.createElement(d.Sl,{paddingTopBottom:"8px"},o.createElement(s.r,{onClick:function(){null!=n&&n.isAuthorNewsletter?(F({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):w()}},"TEXT"===i?o.createElement(c.x,{display:"inline-block"},o.createElement(m.F,{scale:"M"},"Email to subscribers")):o.createElement(c.x,{display:"inline-block"},o.createElement(g,{className:v([E,h])}),o.createElement(c.x,{display:"inline-block",marginLeft:"20px"},o.createElement(m.F,{scale:"S"},"Email to subscribers"))))),o.createElement(u.Q,{onConfirm:function(){I(),O()},isVisible:x,hide:O,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):o.createElement(o.Fragment,null)}))}},43220:(e,n,t)=>{"use strict";t.d(n,{U:()=>i,I:()=>a});var i=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},36736:(e,n,t)=>{"use strict";t.d(n,{x:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},31048:(e,n,t)=>{"use strict";t.d(n,{K:()=>d,I:()=>s});var i=t(34699),a=t(21919),l=t(67294),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},d=function(e){var n=e.id,t=e.collection,r=e.pendingCollection,d=e.pinnedAt,s=(t||r||{id:""}).id,c=(0,a.D)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:t,pendingCollection:r,pinnedAt:d?0:Date.now()}}}),u=(0,i.Z)(c,1)[0],m=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!d}})}),[n,s,d,u]);return[d,m]},s=function(e){var n=e.id,t=e.pinnedByCreatorAt,o=(0,a.D)(r,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,i){var a;"MutationSuccess"===(null===(a=i.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return t?0:Date.now()}}})}}),d=(0,i.Z)(o,1)[0],s=l.useCallback((function(){return d({variables:{postId:n,isPinned:!t}})}),[n,d,t]);return[t,s]}},74302:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i,t:()=>a});var i="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},37774:(e,n,t)=>{"use strict";t.d(n,{z:()=>u});var i=t(34699),a=t(67294),l=t(61095),o=t(38352),r=t(50474),d=t(93310),s=t(68894),c=t(78964),u=function(e){var n=e.hidePopover,t=e.targetUserId,u=e.postId,m=e.viewerId,p=(0,l.Pd)({id:t}).viewerEdge,k=!(null==p||!p.isBlocking),v=(0,s.O)(!1),f=(0,i.Z)(v,3),g=f[0],S=f[1],b=f[2],y=(0,a.useCallback)((function(){b(),n()}),[n,b]),N=(0,c.J)({viewerId:m,targetAuthorId:t,targetPostId:u,onOptimisticComplete:y});return a.createElement(a.Fragment,null,a.createElement(r.U,{onSubmit:N,isVisible:g,hide:y,type:"story",alreadyBlocking:k}),a.createElement(o.Sl,null,a.createElement(d.r,{onClick:S,color:"RED"},"Report story...")))}},53563:(e,n,t)=>{"use strict";t.d(n,{u:()=>O});var i=t(34699),a=t(67294),l=t(71899),o=t(91553),r=t(77355),d=t(47230),s=t(91583),c=t(18635),u=t(18634),m=t(21755),p=t(20113),k=t(87691),v=t(62528),f=t(78142),g=t(17583),S={xs:"SMALL",sm:"REGULAR",md:"REGULAR",lg:"REGULAR",xl:"REGULAR"},b={position:"absolute",top:"8px",left:"0",width:"100%",minHeight:"calc(100% - 8px)",borderRadius:"12px 12px 0 0",padding:"0 24px 24px"},y=function(e){return{"0%":{transform:e?"translateY(100%)":"translateY(16px)"},"100%":{transform:e?"translateY(0%)":"translateY(0px)"}}},N=function(e){return{"0%":{transform:e?"translateY(0%)":"translateY(0px)"},"100%":{transform:e?"translateY(100%)":"translateY(16px)"}}},E={"0%":{opacity:"0"},"100%":{opacity:"1"}},h={"0%":{opacity:"1"},"100%":{opacity:"0"}},x={"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.02)"},"75%":{transform:"scale(1.02)"},"100%":{transform:"scale(1)"}},w={"0%":{background:(0,f.Uy)(0)},"100%":{background:(0,f.Uy)(.25)}},C={"0%":{background:(0,f.Uy)(.25)},"100%":{background:(0,f.Uy)(0)}},F=function(e){var n=e.slideAnimationName,t=e.fadeAnimationName,i=e.isMobile;return function(){var e="".concat(n," ").concat(300,"ms forwards cubic-bezier(0.4, 0, 0.2, 1)");if(i)return{animation:e,position:"absolute",width:"100%",height:"calc(100% - 8px)"};var a="".concat(t," 150ms forwards ease-in-out");return{animation:"".concat(e,", ").concat(a)}}},O=function(e){var n=e.hide,t=e.title,O=e.subtitle,P=e.subtitleTextAlign,I=e.onConfirm,D=e.confirmText,T=e.confirmButtonStyle,R=void 0===T?"STRONG":T,A=e.onCancel,V=e.cancelText,_=e.cancelButtonStyle,M=void 0===_?"OBVIOUS":_,j=e.children,L=e.withCloseButton,B=void 0===L||L,Z=e.hideOnConfirm,U=void 0===Z||Z,G=e.preventClickOutside,H=e.confirmDisabled,z=e.confirmBeforeLeavePage,K=e.delayHideEnabled,W=e.padding,Q=void 0===W?"32px":W,Y=e.subtitleMargin,J=void 0===Y?"24px":Y,q=(0,a.useRef)(null),X=(0,a.useState)(!1),$=(0,i.Z)(X,2),ee=$[0],ne=$[1],te=(0,a.useState)(!0),ie=(0,i.Z)(te,2),ae=ie[0],le=ie[1],oe=(0,g.s)()===m.j.xs,re=(0,v.o)({modalSlideInKeyframe:y(oe),modalSlideOutKeyframe:N(oe),modalFadeInKeyframe:E,modalFadeOutKeyframe:h,modalBounceKeyframe:x,overlayFadeInKeyframe:w,overlayFadeOutKeyframe:C}),de=re.modalSlideInKeyframe,se=re.modalSlideOutKeyframe,ce=re.modalFadeInKeyframe,ue=re.modalFadeOutKeyframe,me=re.modalBounceKeyframe,pe=re.overlayFadeInKeyframe,ke=re.overlayFadeOutKeyframe,ve=(0,a.useCallback)((function(){le(!1)}),[]),fe=(0,a.useCallback)((function(e){q.current&&G&&!oe&&(e.preventDefault(),e.stopPropagation(),q.current.style.animation="".concat(me," 600ms ease-in-out"),ne(!0))}),[me,G,oe]);(0,l.Z)(q,fe),(0,o.a)({disabled:!z});var ge,Se=(0,a.useCallback)((function(){null==I||I(),U&&ve()}),[ve,I,U]),be=(0,a.useCallback)((function(){null==A||A(),ve()}),[ve,A]),ye=(0,a.useMemo)((function(){return D||V?a.createElement(r.x,{display:"flex",justifyContent:"flex-end",gap:"16px"},V&&a.createElement(d.zx,{buttonStyle:M,onClick:be,size:S},V),D&&a.createElement(d.zx,{buttonStyle:R,onClick:Se,size:S,disabled:H},D)):null}),[I,D,R,A,V,M,ve,H]);return(0,a.useEffect)((function(){if(q.current&&ee)return q.current.addEventListener("animationend",e),function(){var n;null===(n=q.current)||void 0===n||n.removeEventListener("animationend",e)};function e(){q.current.style.animation="",ne(!1)}}),[ee,ae,n]),(0,a.useEffect)((function(){if(!ae&&n){var e=setTimeout((function(){n()}),310);return function(){clearTimeout(e)}}}),[ae,n]),(0,a.useEffect)((function(){K&&le(!1)}),[K]),a.createElement(s.V,{isVisible:ae,hide:G?void 0:ve,withCloseButton:!1,withLayerAnimation:!1,withAnimation:!0,padding:0,customBackgroundColor:(0,f.Uy)(.25),layerRules:(ge=ae?pe:ke,function(){return{animation:"".concat(ge," 150ms forwards ease-in-out")}}),containerRules:F({slideAnimationName:ae?de:se,fadeAnimationName:ae?ce:ue,isMobile:oe})},a.createElement(r.x,{ref:q,boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 10px",width:"540px",padding:Q,borderRadius:"4px",backgroundColor:"BACKGROUND",position:"relative",xs:b},a.createElement(u.y,{xs:!0,height:"56px",marginBottom:"16px",paddingTop:"16px"},ye),a.createElement(r.x,{textAlign:"center"},a.createElement(p.X6,{scale:"S"},t)),O&&a.createElement(r.x,{marginTop:J,textAlign:P},a.createElement(k.F,{scale:"M",color:"DARKER"},O)),j&&a.createElement(r.x,{marginTop:"32px"},j),ye&&a.createElement(u.y,{sm:!0,md:!0,lg:!0,xl:!0,marginTop:"32px"},ye),B&&a.createElement(r.x,{position:"absolute",right:{xs:void 0,sm:"16px",md:"16px",lg:"16px",xl:"16px"},top:{xs:"18px",sm:"16px",md:"16px",lg:"16px",xl:"16px"},left:{xs:"18px",sm:void 0,md:void 0,lg:void 0,xl:void 0}},a.createElement(c.P,{isPositionAbsolute:!1,compensateInnerPadding:!1,size:"REGULAR",onClick:ve}))))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6487.eef0a2d8.chunk.js.map